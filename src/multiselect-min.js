'use strict';(function(a){a.fn.MultiSelect=function(b){"object"!=typeof b&&(b={});var e=a.extend({size:10,css_class_selected:"selected",enableCategoriesSel:!1,keepPrevSelection:!0},b),c=a.fn.MultiSelect.modules,f=function(){this.change(function(){for(var b=a(this).find(":selected"),e=a.data(this,"MultiSelect_selection"),c=0,d;b[c];c++)d=a(b[c]),e.toggle(d.get(0)),d.attr("selected",!1)})},d=function(){return a.data(this.get(0),"MultiSelect_selection")||a.data(this.get(0),"MultiSelect_selection",new c.selection_API(this,
e.css_class_selected))},g=[];this.each(function(){var b=a(this);g.push(d.call(b));f.call(b);b.attr("multiple")||b.attr("multiple",!0);b.attr("size",e.size);e.enableCategoriesSel&&new c.categories_selection(b);e.keepPrevSelection&&b.find("option[selected=selected]").addClass(e.css_class_selected)});return g};a.fn.MultiSelect.modules={}})(jQuery);(function(){$.valHooks.select.original_get||($.valHooks.select.original_get=$.valHooks.select.get,$.valHooks.select.get=function(a){var b=$.data(a,"MultiSelect_selection");return b?(b=b.getAllVal(),a=jQuery.valHooks.select.original_get(a),null==a&&(a=[]),a=[].concat(b,a),!a.length?null:a):jQuery.valHooks.select.original_get(a)})})();(function(){var a=function(b,a){this.$select=$(b);this.classSelected=a};a.prototype.select=function(b){var a=$(b);if(!a.hasClass(this.classSelected))return a.addClass(this.classSelected),b};a.prototype.deselect=function(b){$(b).removeClass(this.classSelected);return b};a.prototype.toggle=function(b){$(b).hasClass(this.classSelected)?this.deselect(b):this.select(b)};a.prototype.getAll=function(){return this.$select.find("option."+this.classSelected)};a.prototype.resetSelection=function(){for(var b=
0,a=this.getAll();this.deselect(a[b]);b++);};a.prototype.getAllVal=function(){var b=[];$.each(this.getAll(),function(a,c){b.push(c.value)});return b};$.fn.MultiSelect.modules.selection_API=a})();(function(){var a=function(b){this.$trgtSelect=$(b);$('<div class = "multiselect_main_categories"/>').insertBefore(this.$trgtSelect).append(this.$trgtSelect).append(this._getDOMObjWrapper())};a.prototype._getDOMObjWrapper=function(){var b=$("<div class = 'multiselect_wrap_categories'></div>"),a=[],c=this;$.each(this.$trgtSelect.find("optgroup"),function(b,d){a[b]=$("<div class = 'category' id = "+d.label+">"+d.label+"</div>").click(function(){c.selectAllOptionsFromOptgroup(this.id)})});$.each(a,function(a,
c){b.append(c)});return b};a.prototype.selectAllOptionsFromOptgroup=function(b){for(var a=this.$trgtSelect.find("optgroup"),c=0;a[c]&&a[c].label!=b;c++);if(c!=a.length){var f=$.data(this.$trgtSelect.get(0),"MultiSelect_selection")||{toggle:function(){}};$.each($(a[c]).find("option"),function(a,b){f.toggle(b)})}};$.fn.MultiSelect.modules.categories_selection=a})();
