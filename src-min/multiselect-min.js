'use strict';(function(b){var e=function(a,c){this.$select=b(a);this.classSelected=c};e.prototype.select=function(a){var c=b(a);if(!c.hasClass(this.classSelected))return c.addClass(this.classSelected),a};e.prototype.deselect=function(a){b(a).removeClass(this.classSelected);return a};e.prototype.toggle=function(a){b(a).hasClass(this.classSelected)?this.deselect(a):this.select(a)};e.prototype.getAll=function(){return this.$select.find("option."+this.classSelected)};e.prototype.resetSelection=function(){for(var a=
0,b=this.getAll();this.deselect(b[a]);a++);};e.prototype.getAllVal=function(){var a=[];b.each(this.getAll(),function(b,d){a.push(d.value)});return a};var g=function(a){this.$trgtSelect=b(a);b('<div class = "multiselect_main_categories"/>').insertBefore(this.$trgtSelect).append(this.$trgtSelect).append(this._getDOMObjWrapper())};g.prototype._getDOMObjWrapper=function(){var a=b("<div class = 'multiselect_wrap_categories'></div>"),c=[],d=this;b.each(this.$trgtSelect.find("optgroup"),function(a,f){c[a]=
b("<div class = 'category' id = "+f.label+">"+f.label+"</div>").click(function(){d.selectAllOptionsFromOptgroup(this.id)})});b.each(c,function(b,c){a.append(c)});return a};g.prototype.selectAllOptionsFromOptgroup=function(a){for(var c=this.$trgtSelect.find("optgroup"),d=0;c[d]&&c[d].label!=a;d++);if(d!=c.length){var e=b.data(this.$trgtSelect.get(0),"MultiSelect_selection")||{toggle:function(){}};b.each(b(c[d]).find("option"),function(b,a){e.toggle(a)})}};b.fn.MultiSelect=function(a){"object"!=typeof a&&
(a={});var c=b.extend({size:10,css_class_selected:"selected",enableCategoriesSel:!1,keepPrevSelection:!0},a),d=function(){this.change(function(){for(var a=b(this).find(":selected"),c=b.data(this,"MultiSelect_selection"),d=0,e;a[d];d++)e=b(a[d]),c.toggle(e.get(0)),e.attr("selected",!1)})},h=function(){var a=b.data(this.get(0),"MultiSelect_selection");return a?a:a=b.data(this.get(0),"MultiSelect_selection",new e(this,c.css_class_selected))};b.valHooks.select.original_get||(b.valHooks.select.original_get=
b.valHooks.select.get,b.valHooks.select.get=function(a){var c=b.data(a,"MultiSelect_selection");return c?(c=c.getAllVal(),a=jQuery.valHooks.select.original_get(a),null==a&&(a=[]),a=[].concat(c,a),!a.length?null:a):jQuery.valHooks.select.original_get(a)});var f=[];this.each(function(){var a=b(this);f.push(h.call(a));d.call(a);a.attr("multiple")||a.attr("multiple",true);a.attr("size",c.size);c.enableCategoriesSel&&new g(a);c.keepPrevSelection&&a.find("option[selected=selected]").addClass(c.css_class_selected)});
return f}})(jQuery);
